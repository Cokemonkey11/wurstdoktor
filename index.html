<!doctype html>
<html>
<head>
    <title>Docs test</title>

    <link
        rel="stylesheet"
        href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
        integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
        crossorigin="anonymous"
    />
</head>

<body>
    <div class="loading">
        Loading...
    </div>
    <div class="contents">

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/3.13.0/js-yaml.min.js"></script>
    <script type="text/javascript">
        $(document).ready(() => {
            $('.loading').hide();

            [
                "publish/event/DamageDetection.wurst.yaml",
                "publish/math/Angle.wurst.yaml",
                "publish/closures/ClosureTimers.wurst.yaml",
            ].forEach((uri) => {
                $.get(uri, (data) => {
                    $('.contents').append(`<h1>${uri}</h1>`);

                    jsyaml.load(data).forEach((fnOrClass) => {
                        Object.entries(fnOrClass).forEach(([fnOrClass, details]) => {
                            const icon = `<i class="fas ${fnOrClass === "FreeFunction" ? "fa-square-root-alt" : "object-group"}"></i>`;
                            $('.contents').append(`<h2>${icon} ${details.extensor !== null ? details.extensor + "." : ""}${details.name}</h2><p>${details.doc}</p>`)
                        })
                    });
                }).fail(() => {
                    console.error("halt");
                });
            });
        });
    </script>
</body>
</html>
